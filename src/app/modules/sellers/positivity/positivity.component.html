<div class="card card-flush mb-10">
  <div class="card-header pt-5">
    <h3 class="card-title text-gray-900 fw-bold">Faturamento por Marca / Vendedor</h3>
  </div>
  <div class="card-body">
    <div style="width: 100%; overflow-x: auto;">
      <canvas id="stacked-bar-chart" style="min-width: 700px; height: 300px;"></canvas>
    </div>
  </div>
</div>

<!-- Gr√°fico Azzo separado -->
<div class="d-flex flex-wrap gap-5 mb-10">
  <!-- Faturamento Consolidado (Azzo) -->
  <div class="card card-flush flex-grow-1" style="min-width: 300px;">
    <div class="card-header pt-5">
      <h3 class="card-title text-gray-900 fw-bold">Faturamento Consolidado (Azzo)</h3>
    </div>
    <div class="card-body">
      <div style="width: 100%;">
        <canvas id="chart-azzo" style="width: 100%; height: 280px;"></canvas>
      </div>
    </div>
  </div>

  <!-- Positiva√ß√£o Geral da Azzo -->
  <div class="card card-flush mb-10">
    <div class="card-header pt-5 d-flex justify-content-between align-items-center">
      <h3 class="card-title text-gray-900 fw-bold">Positiva√ß√£o (Azzo)</h3>
      <select class="form-select w-auto" [(ngModel)]="graficoPositivacaoAzzo" (change)="positivityAzzoChange()">
        <option value="geral">Positiva√ß√£o Geral (Azzo)</option>
        <option value="contribuicao">Clientes Positivados por Marca</option>
      </select>
      
    </div>
    <div class="card-body">
      <canvas *ngIf="graficoPositivacaoAzzo === 'geral'" id="chart-positivacao-azzo" style="min-height: 300px;"></canvas>
      <canvas *ngIf="graficoPositivacaoAzzo === 'contribuicao'" id="chart-clientes-azzo-contrib" style="min-height: 300px;"></canvas>
    </div>
  </div>
</div>

<!-- Positiva√ß√£o Geral -->
<div class="card card-flush mb-10">
  <div class="card-header pt-5 d-flex justify-content-between align-items-center">
    <h3 class="card-title text-gray-900 fw-bold">Positiva√ß√£o</h3>
    <select class="form-select w-auto" [(ngModel)]="graficoPositivacao" (change)="positivityChange()">
      <option value="geral">Geral por Vendedor</option>
      <option value="porMarca">Por Marca Vendedor</option>
      <option value="contribuicao">Contribui√ß√£o na Positiva√ß√£o</option>
    </select>    
  </div>
  <div class="card-body">
    <canvas *ngIf="graficoPositivacao === 'geral'" id="bar-chart-geral" style="min-height: 300px;"></canvas>
    <canvas *ngIf="graficoPositivacao === 'porMarca'" id="bar-chart-marcas" style="min-height: 300px;"></canvas>
    <canvas *ngIf="graficoPositivacao === 'contribuicao'" id="bar-chart-contribuicao" style="min-height: 300px;"></canvas>
  </div>
</div>
<!-- Clientes positivados por marca (n√∫mero absoluto) -->
<!-- Clientes Positivados com contribui√ß√£o em altura -->
<div class="card card-flush mb-10">
  <div class="card-header pt-5">
    <h3 class="card-title text-gray-900 fw-bold">Clientes Positivados por Marca (Altura = Contribui√ß√£o)</h3>
  </div>
  <div class="card-body">
    <div style="width: 100%; overflow-x: auto;">
      <canvas id="bar-chart-clientes-absolutos" style="min-width: 700px; height: 300px;"></canvas>
    </div>
  </div>
</div>
<div *ngFor="let vendedor of vendedores; let i = index" class="card card-flush h-md-50 mb-5 mb-xl-10">
  <div class="card-header pt-5">
      <div class="card-title d-flex flex-column">
        <!--begin::Info--> 
        <div class="d-flex align-items-center">
          <span class="fs-4 fw-semibold text-gray-500 me-1 align-self-start">R$</span>
          <span class="fs-2hx fw-bold text-gray-900 me-2 lh-1 ls-n2">
            {{ vendedor.totalFaturado | number: '1.0-2' }}
          </span>
          <span class="badge badge-light-success fs-base ms-2">
            <i class="ki-duotone ki-arrow-up fs-5 text-success ms-n1"></i> 
            Faturado
          </span>            
        </div>
    
        <h5 class="text-gray-500 pt-1 fw-semibold fs-6">
          {{ vendedor.nome }}
          <i *ngIf="vendedor.nome === topSellerName" class="ms-1 fs-3">üëë</i>
        </h5>
       
        <span class="text-gray-500 pt-1 fw-semibold fs-6">
          Pedidos: {{ vendedor.totalPedidos }}
        </span>
      </div>
    </div>     

  <div class="card-body pt-2 pb-4 d-flex flex-wrap align-items-center">
    <!--begin::Chart-->
    <div class="d-flex flex-center me-5 pt-2">
      <div style="width: 200px; height: 200px;">
        <canvas [id]="'chart-' + i" width="200" height="200"></canvas>
      </div>
    </div>
    <!--end::Chart-->

    <!--begin::Labels-->
    <div class="d-flex flex-column content-justify-center flex-row-fluid">
      <div *ngFor="let marca of vendedor.marcasList; let j = index" class="d-flex fw-semibold align-items-center my-2">
        <div class="bullet w-8px h-3px rounded-2 me-3" [style.backgroundColor]="marca.cor"></div>
        <div class="text-gray-500 flex-grow-1 me-4">{{ marca.nome }}</div>
        <div class="fw-bolder text-gray-700 text-xxl-end">R$ {{ marca.valor | number: '1.2-2' }}</div>
      </div>
    </div>
  </div> 
</div>  

